<!DOCTYPE html>
<html>

<head>
  <title>Earthdata Research</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.21.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.2"></script>
</head>

<style>
  .viz-container {
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    justify-content: space-evenly;
    align-items: center;
  }

  .viz-item {
    width: 80%;
  }
</style>

<body>
  <div class="viz-container">
    <h1>Research Publications with EOSDIS Data</h1>
    <p style="width: 80%;">
      The following charts show analyses that were built upon a datset of over <b>10,000
        research publications</b> that reference EOSDIS datasets from 1974 to the present.
      Results are biased toward specific datasets and areas of study within
      EOSDIS depending upon where and how the data was collected. Crucial data contributions were made by
      individuals from various Distributed Active Archive Centers:
      Irina Gerasimov and Dave Meyer from GES DISC DAAC,
      Wade Albright from Alaska Satellite Facility DAAC,
      Chris Torbert and Danielle Golon from The Land Processes DAAC,
      Suresh Vannan and Ed Armstrong from The Physical Oceanography DAAC,
      and Bruce Wilson from Oak Ridge National Laboratory DAAC.
    </p>
    <h2>Count of Publications By Year</h2>
    <div class="viz-item" id="vis0"></div>
    <h2>Publication Abstract Text Embedding Clusters</h2>
    <div class="viz-item" id="vis8"></div>
    <h2>Publication Location of Study</h2>
    <div class="viz-item" id="vis1"></div>
    <h2>Average Number of Datasets Referenced Per Publication</h2>
    <div class="viz-item" id="vis2"></div>
    <h2>Frequently Referenced Datasets</h2>
    <div class="viz-item" id="vis3"></div>
    <h2>Frequent Journals</h2>
    <div class="viz-item" id="vis4"></div>
    <h2>Dataset Journal Copresence</h2>
    <div class="viz-item" id="vis5"></div>
    <h2>Journals with Count of Publications = 1</h2>
    <div class="viz-item" id="vis6" style="width: initial;"></div>
    <h2>Mentions of Machine Learning in Publication Titles</h2>
    <div class="viz-item" id="vis7"></div>
    <h2>Publications in Open Journals</h2>
    <div class="viz-item" id="vis9"></div>
  </div>

  <script type="text/javascript">
    var v0 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": "container",
      "height": 400,
      "description": "A simple bar chart with embedded data.",
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv"
      },
      "mark": {
        "tooltip": true,
        "type": "area",
        "line": {
          "color": "steelblue"
        },
        "color": {
          "x1": 1,
          "y1": 1,
          "x2": 1,
          "y2": 0,
          "gradient": "linear",
          "stops": [
            {
              "offset": 0,
              "color": "white"
            },
            {
              "offset": 1,
              "color": "steelblue"
            }
          ]
        }
      },
      "encoding": {
        "tooltip": [
          { "aggregate": "distinct", "type": "quantitative", "field": "pub_doi", "title": "Count of Publications" }
        ],
        "x": { "field": "pub_year", "type": "temporal", "title": "Publication Year" },
        "y": { "aggregate": "distinct", "field": "pub_doi", "title": "Count of Publications" }
      },
      "transform": [
        { "filter": { "timeUnit": "year", "field": "pub_year", "gte": "1998" } }
      ]
    };
    vegaEmbed('#vis0', v0, {"actions": false});

    var v1 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": "container",
      "height": 400,
      "layer": [
        {
          "data": {
            "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/world-110m.json",
            "format": { "type": "topojson", "feature": "countries" }
          },
          "mark": { "type": "geoshape", "fill": "lightgray", "stroke": "gray" }
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/locations.csv"
          },
          "projection": {
            "type": "equalEarth"
          },
          "mark": {
            "type": "circle",
            "size": 10,
            "color": "steelblue"
          },
          "encoding": {
            "tooltip": [
              { "field": "latitude", "type": "quantitative" },
              { "field": "longitude", "type": "quantitative" }
            ],
            "longitude": {
              "field": "longitude",
              "type": "quantitative"
            },
            "latitude": {
              "field": "latitude",
              "type": "quantitative"
            }
          }
        }
      ]
    };
    vegaEmbed('#vis1', v1, {"actions": false});

    var v2 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": "container",
      "height": 400,
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv"
      },
      "transform": [
        {
          "aggregate": [
            {
              "op": "distinct",
              "field": "pub_doi",
              "as": "distinct_pub_doi"
            },
            {
              "op": "count",
              "field": "ds_doi",
              "as": "count_ds_doi"
            }
          ],
          "groupby": ["pub_year"]
        },
        { "calculate": "format(datum.count_ds_doi / datum.distinct_pub_doi, ',.2f')", "as": "mean_ds" }

      ],
      "layer": [
        {
          "mark": { "type": "errorband", "extent": "stdev", "opacity": 0.2 },
          "encoding": {
            "y": {
              "field": "mean_ds",
              "type": "quantitative",
              "title": "Average Number of Datasets Per Publication"
            }
          }
        },
        {
          "mark": "rule",
          "encoding": {
            "y": {
              "field": "mean_ds",
              "type": "quantitative",
              "aggregate": "mean"
            }
          }
        },
        {
          "mark": "point",
          "encoding": {
            "tooltip": {
              "field": "mean_ds"
            },
            "x": { "field": "pub_year", "type": "temporal", "title": "Publication Year" },
            "y": { "field": "mean_ds", "type": "quantitative" }
          }
        }
      ]
    };
    vegaEmbed('#vis2', v2, {"actions": false});

    var v3 = {
      "data": { "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv" },
      "width": "container",
      "height": 400,
      "transform": [
        {
          "aggregate": [
            { "op": "count", "field": "ds_doi", "as": "count" }
          ],
          "groupby": ["ds_title"]
        },
        {
          "window": [{ "op": "row_number", "field": "", "as": "rank" }],
          "sort": [{ "field": "count", "order": "descending" }]
        },
        { "filter": "datum.rank < 10" },
        { "filter": "datum.ds_title != ''" }
      ],
      "encoding": {
        "y": { "type": "nominal", "field": "ds_title", "sort": { "field": "ds_doi", "order": "ascending", "op": "count" }, "axis": null }
      },
      "layer": [
        {
          "mark": { "type": "bar", "color": "#ddd" }, "encoding": {
            "x": { "type": "quantitative", "field": "count", "title": "Count of Dataset References" }
          }
        },
        {
          "mark": { "type": "text", "align": "left", "x": 5 },
          "encoding": {
            "text": { "field": "ds_title" }
          }
        }
      ],
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json"
    };

    vegaEmbed('#vis3', v3, {"actions": false});

    var v4 = {
      "width": "container",
      "height": 400,
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "transform": [
        {
          "aggregate": [
            { "op": "distinct", "field": "pub_doi", "as": "pub_count" }
          ],
          "groupby": ["pub_journal"]
        },
        {
          "window": [{ "op": "row_number", "as": "rank" }],
          "sort": [{ "field": "pub_count", "order": "descending" }]
        },
        { "filter": "datum.rank < 10" },
        { "filter": "datum.pub_journal != ''" }
      ],
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv"
      },
      "encoding": {
        "y": { "type": "nominal", "field": "pub_journal", "sort": { "field": "pub_journal", "order": "ascending", "op": "count" }, "axis": null }
      },
      "layer": [
        {
          "mark": { "type": "bar", "color": "#ddd" }, "encoding": {
            "x": { "type": "quantitative", "field": "pub_count", "title": "Count of Publications" }
          }
        },
        {
          "mark": { "type": "text", "align": "left", "x": 5 },
          "encoding": {
            "text": { "field": "pub_journal" }
          }
        }
      ]
    };

    vegaEmbed('#vis4', v4, {"actions": false});

    var v5 = {
      "width": "container",
      "height": 400,
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv"
      },
      "config": {
        "view": {
          "strokeWidth": 0,
          "step": 13
        },
        "axis": {
          "domain": false
        }
      },
      "transform": [
        { "filter": "datum.pub_journal != ''" },
        { "filter": "datum.ds_title != ''" },
        {
          "joinaggregate": [{
            "op": "count",
            "field": "*",
            "as": "count_ds_title"
          }],
          "groupby": [
            "ds_title"
          ]
        },
        {
          "joinaggregate": [{
            "op": "count",
            "field": "*",
            "as": "count_pub_journal"
          }],
          "groupby": [
            "pub_journal"
          ]
        },
        { "filter": "datum.count_ds_title > 40" },
        { "filter": "datum.count_pub_journal > 30" }
      ],
      "mark": { "type": "rect", "tooltip": { "content": "data" } },
      "encoding": {
        "x": {
          "field": "pub_journal",
          "type": "nominal",
          "title": ""
        },
        "y": {
          "field": "ds_title",
          "type": "ordinal",
          "title": ""
        },
        "color": {
          "field": "*",
          "aggregate": "count",
          "type": "quantitative",
          "legend": {
            "title": null
          }
        }
      }
    };

    vegaEmbed('#vis5', v5, {"actions": false});

    var v6 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv"
      },
      "config": {
        "view": {
          "strokeWidth": 0,
          "step": 13
        },
        "axis": {
          "domain": false
        }
      },
      "transform": [
        { "filter": "datum.pub_journal != ''" },
        { "filter": "datum.ds_title != ''" },

        {
          "joinaggregate": [{
            "op": "count",
            "field": "*",
            "as": "count_pub_journal"
          }],
          "groupby": [
            "pub_journal"
          ]
        },

        { "filter": "datum.count_pub_journal == 1" }
      ],
      "layer": [
        {
          "mark": { "type": "bar", "color": "#ddd" }, "encoding": {
            "x": { "type": "quantitative", "field": "count", "axis": null }
          }
        },
        {
          "mark": { "type": "text", "align": "left", "x": 5 },
          "encoding": {
            "text": { "field": "pub_journal" }
          }
        }
      ],
      "encoding": {
        "tooltip": { "field": "pub_title" },
        "y": {
          "field": "pub_journal",
          "type": "nominal",
          "axis": null
        }
      }
    };
    vegaEmbed('#vis6', v6, {"actions": false})

    var v7 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": "container",
      "height": 400,
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv"
      },
      "transform": [
        { "filter": "!isValid(datum.pub_title) ? false : (indexof(lower(datum.pub_title), 'machine learning') > -1 || indexof(lower(datum.pub_title), 'neural') > -1)" },
        { "filter": { "timeUnit": "year", "field": "pub_year", "gte": "2013" } },
        {
          "aggregate": [
            {
              "op": "distinct",
              "field": "pub_doi",
              "as": "distinct_pub_doi"
            }
          ],
          "groupby": ["pub_year"]
        }
      ],
      "layer": [
        {
          "mark": {
            "type": "line",
            "color": "firebrick"
          },
          "transform": [
            {
              "regression": "pub_year",
              "on": "distinct_pub_doi",
              "method": "pow"
            }
          ],
          "encoding": {
            "x": {
              "field": "pub_year",
              "type": "temporal",
              "title": "Publication Year"
            },
            "y": {
              "field": "distinct_pub_doi",
              "type": "quantitative",
              "title": "Count of Publications"
            }
          }
        },
        {
          "mark": { "type": "point", "size": 80 },
          "encoding": {
            "x": { "field": "pub_year", "type": "temporal" },
            "y": { "field": "distinct_pub_doi", "type": "quantitative" }
          }
        }
      ]
    };

    vegaEmbed('#vis7', v7, {"actions": false})

    var v8 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": "container",
      "height": 400,
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/cluster_totals.csv"
      },
      "mark": {"type": "rect", "tooltip": { "content": "data" }},
      "encoding": {
        "x": { "field": "cluster", "type": "nominal", "axis": { "labelAngle": 50 }, "title": "Cluster Keywords" },
        "y": {
          "type": "quantitative",
          "field": "cluster_count",
          "scale": { "type": "log", "domain": [1, 3657] },
          "title": "Publication Count"
        }, 
        "color": { "type": "nominal", "field": "cluster", "legend": null }
      }
    };

    vegaEmbed('#vis8', v8, {"actions": false});
    
    var v9 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 800,
      "height": 400,
      "data": {
        "url": "https://raw.githubusercontent.com/vinnyinverso/earthdata-research/main/article_db.csv"
      },
      "transform": [
        { "filter": "!isValid(datum.pub_title) ? false : (indexof(lower(datum.pub_journal), 'int. j. appl. earth obs.') > -1 || indexof(lower(datum.pub_journal), 'frontiers') > -1 || indexof(lower(datum.pub_journal), 'arxiv') > -1 || indexof(lower(datum.pub_journal), 'plos one') > -1 || indexof(lower(datum.pub_journal), 'environment international') > -1 || indexof(lower(datum.pub_journal), 'international journal of applied earth observation') > -1 || indexof(lower(datum.pub_journal), 'journal of hydrology') > -1 || indexof(lower(datum.pub_journal), 'environmental research letters') > -1)" },
        
        {
          "aggregate": [
            {
              "op": "distinct",
              "field": "pub_doi",
              "as": "distinct_pub_doi"
            }
          ],
          "groupby": ["pub_year"]
        }
      ],
      "layer": [
        {
          "mark": {
            "type": "line",
            "color": "firebrick"
          },
          "transform": [
            {
              "regression": "pub_year",
              "on": "distinct_pub_doi",
              "method": "pow"
            }
          ],
          "encoding": {
            "x": {
              "field": "pub_year",
              "type": "temporal",
              "title": "Publication Year"
            },
            "y": {
              "field": "distinct_pub_doi",
              "type": "quantitative",
              "title": "Count of Publications"
            }
          }
        },
        {
          "mark": { "type": "point", "size": 80 },
          "encoding": {
            "x": { "field": "pub_year", "type": "temporal" },
            "y": { "field": "distinct_pub_doi", "type": "quantitative" }
          }
        }
      ]
    };
    
   vegaEmbed('#vis9', v9, {"actions": false});

  </script>
</body>

</html>
